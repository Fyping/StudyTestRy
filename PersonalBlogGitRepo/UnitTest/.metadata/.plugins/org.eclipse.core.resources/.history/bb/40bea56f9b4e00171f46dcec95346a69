package cn.com.fangself.test;
/**
 * 
 * 问题:
 * 模拟三个人买票，张某，李某和赵某买电影票，售票员只有3张5元的人民币
 * 电影票5元一张，
 * 张某拿20元一张的人民币排在李某的前面买票，李某排在赵某的前面拿一张10元的人民币买票，
 * 赵某拿一张5元的人民币买票
 * */
class Ticket extends Thread {
	
	int fiveAmount = 3;
	int tenAmount = 0;
	int twentyAmount = 0;
	Thread t = null;
	public Ticket(Thread t){
		this.t = t;
	}
	public Ticket(){}
	public void run(){
		if(this.t.getName().equals("张某")){
			sale(20);
		}else if(this.t.getName().equals("李某")){
			sale(10);
		}else if(this.t.getName().equals("赵某")){
			sale(5);
		}
	}
	public synchronized void  sale(int money){
		if(money == 5){
			System.out.println(this.t.getName()+"买票成功");
		}
		else if(money==10){
			if(fiveAmount>1){
				fiveAmount--;
				tenAmount ++;
				System.out.println(this.t.getName()+"买票成功了");
			}else{
				System.out.println("钱不够，先等等");
				try {
					this.t.wait();
				} catch (InterruptedException e) {
					System.out.println("好的");
					System.out.println(this.t.getName()+"买票成功了");
				}
			}
		}else if(money==20){
			if(fiveAmount>3){
				fiveAmount-=3;
				twentyAmount++;
				System.out.println(this.t.getName()+"买票成功了");
			}else{
				try{
					this.t.wait();
				}catch(InterruptedException e){
					System.out.println(this.t.getName()+"买票成功了");
				}
			}
		}
		
		this.notifyAll();
	}
}
public class TicketItem {
	public static void main(String []args){
	

		Ticket zhangmou = new Ticket();
		zhangmou.setName("zhangmou");
		Thread limou  = new Ticket();
		limou.setName("limou");
		Thread  zhaomou = new Ticket();
		zhaomou.setName("zhaomou");
		zhangmou.start();
		limou.start();
		zhaomou.start();
		
	}
}
